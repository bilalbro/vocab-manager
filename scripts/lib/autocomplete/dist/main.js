var Autocompleter;(()=>{var t={19:()=>{Element.prototype.matchesSelector=function(t){return/^\w+$/.test(t)?this.nodeName.toLowerCase()===t:/^\./.test(t)?this.classList.contains(t.slice(1)):/^\#/.test(t)?this.getAttribute("id")===t.slice(1):void 0},Element.prototype.isItselfOrWithin=function(t){var e=this;for(t=t.toLowerCase();e!==document&&null!==e;){if(e.matchesSelector(t))return e;e=e.parentNode}return!1}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,s),a.exports}s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";s.r(i),s.d(i,{default:()=>g});const t="selected",e="hl",n=class{static defaultInputValue(t){return t}keyEventHandler(t){var e=this.element.value;this.query=e,this.parent.selection.activate()}setUpKeyEventHandler(){var t=this,e=null;this.element.addEventListener("input",(function(){t.parent.selection.customMakeSelection&&t.parent.suggestionsBox.showLoadingMessage(),clearTimeout(e),e=setTimeout(t.keyEventHandler.bind(t),t.debounceDelay)}))}arrowNavHandler(t){this.parent.suggestionsBox.noSuggestions()||(40===t.keyCode?(this.parent.suggestionsBox.goDown(),t.preventDefault()):38===t.keyCode?(this.parent.suggestionsBox.goUp(),t.preventDefault()):13===t.keyCode&&this.parent.suggestionsBox.handleEnter())}setUpArrowNavHandler(){this.element.addEventListener("keydown",this.arrowNavHandler.bind(this))}blurHandler(t){this.parent.suggestionsBox.mouseDown?this.parent.suggestionsBox.mouseDown=!1:this.parent.suggestionsBox.hide()}setUpBlurHandler(){this.element.addEventListener("blur",this.blurHandler.bind(this))}focusHandler(t){this.parent.selection.activate()}setUpFocusHandler(){this.element.addEventListener("focus",this.focusHandler.bind(this))}setInputValue(t){var e=this.inputValue(t);this.query=e,this.element.value=e}constructor(t,e){this.parent=t,this.element=e.element,this.arrowNav=e.arrowNav,this.inputValue=e.inputValue,this.showOnFocus=e.showOnFocus,this.debounceDelay=e.debounceDelay,this.query="",this.setUpKeyEventHandler(),this.setUpBlurHandler(),this.showOnFocus&&this.setUpFocusHandler(),this.arrowNav&&this.setUpArrowNavHandler()}};class a{static defaultHighlightTarget(t){return t}static defaultMatchTarget(t){return t}static defaultIsMatch(t,e){var s=this.matchTarget(e).toLowerCase().indexOf(t.toLowerCase());return-1!==s&&[s,s+t.length-1]}static defaultMakeSelection(t){var e=[];if(0===t.length)return e=this.parent.store.data;var s=this;return this.parent.store.data.forEach((function(i){var n=s.isMatch(t,i);n&&(s.highlight&&s.highlightMatchAndStore(i,n),e.push(i))})),e}highlightMatchAndStore(t,e){var s,i=this.highlightTarget(t).split(""),n=e[0];i[n]="<b>"+i[n];var a=e[1];i[a]=i[a]+"</b>",s=i.join(""),this.parent.store.addHighlightedMatch(s)}doneLoadingData(){this.parent.suggestionsBox.shown&&this.activate()}doneMakingSelection(t){this.proceed(t)}proceed(t){t.length?(this.parent.store.matches=t,this.parent.ordering.activate(t)):this.parent.suggestionsBox.noMatch()}activate(){var t=this.parent.input.query;if(this.parent.store.reset(),0!==t.length||this.allOnEmpty)if(this.parent.store.isLoading)this.parent.suggestionsBox.showLoadingMessage();else{var e=this.makeSelection(t,this.doneMakingSelection.bind(this));if(e instanceof Promise)return this.parent.suggestionsBox.showLoadingMessage(),void e.then(this.doneMakingSelection.bind(this));void 0!==e?this.proceed(e):this.parent.suggestionsBox.showLoadingMessage()}else this.parent.suggestionsBox.hide()}constructor(t,e){this.parent=t,this.matchTarget=e.matchTarget,this.makeSelection=e.makeSelection,this.isMatch=e.isMatch,this.allOnEmpty=e.allOnEmpty,this.highlight=e.highlight,this.highlightTarget=e.highlightTarget,this.customMakeSelection=!1,this.makeSelection!==a.defaultMakeSelection&&(this.customMakeSelection=!0)}}const o=a,r=class{static defaultLoadingHTML(){return"Loading..."}static defaultGetSelectionId(t){return t}noSuggestions(){return!this.suggestionElements||0===this.suggestionElements.length}refreshSuggestionElements(){this.suggestionElements=this.element.querySelectorAll(".ac_suggestion")}show(t){this.element.innerHTML=t,this.element.classList.add("ac_suggestions--shown"),this.refreshSuggestionElements(),this.navIndex=-1,this.shown=!0}hide(){this.element.innerHTML="",this.element.classList.remove("ac_suggestions--shown"),this.shown=!1}put(t){this.element.innerHTML=t}selectWithMultiple(e){e.classList.add(t)}unselectWithMultiple(e){e.classList.remove(t)}selectEntryWithMultiple(t,e){var s=this.getSelectionId(e),i=this.parent.store,n=this.parent.presentation.showSelected;i.existsSelection(s)?(i.removeSelection(s),this.unselectWithMultiple(t)):(i.addSelection(s),n?this.selectWithMultiple(t,e):(t.parentNode.removeChild(t),this.refreshSuggestionElements(),this.highlightLi(),this.suggestionElements.length||this.noMatch()))}select(t){var e,s=t.getAttribute("data-index"),i=this.parent.store.matches[s];this.multiple?this.selectEntryWithMultiple(t,i):(this.parent.input.setInputValue(i),this.parent.suggestionsBox.hide()),this.onSelect&&(this.multiple&&(e=this.getSelectionId(i)),this.onSelect(i,e))}handleEnter(){var t=this.navIndex;if(-1!==t){var e=this.suggestionElements[t];this.select(e)}}clickHandler(t){var e=t.target.isItselfOrWithin(".ac_suggestion");e&&this.select(e)}setUpClickHandler(){this.element.addEventListener("click",this.clickHandler.bind(this))}bringSuggestionInView(){var t=this.navIndex,e=this.element;if(-1!==t){var s=e.clientHeight,i=this.suggestionElements[t],n=i.offsetTop,a=i.clientHeight;n+a-e.scrollTop>s?e.scrollTop=n+a-s:e.scrollTop>n&&(e.scrollTop=n)}}highlightLi(){var t=this.navIndex,s=this.suggestionElements;s[t]?s[t].classList.add(e):this.navIndex=-1}goDown(){var t=this.navIndex,s=this.suggestionElements;-1===t?s[++t].classList.add(e):t===s.length-1?(s[t].classList.remove(e),this.element.scrollTop=0,t=-1):(s[t].classList.remove(e),s[++t].classList.add(e)),this.navIndex=t,this.bringSuggestionInView()}goUp(){var t=this.navIndex,s=this.suggestionElements;-1===t?s[t=s.length-1].classList.add(e):0===t?(s[t].classList.remove(e),t=-1):(s[t].classList.remove(e),s[--t].classList.add(e)),this.navIndex=t,this.bringSuggestionInView()}noMatch(){this.show("Nothing found.")}showLoadingMessage(){this.show(this.loadingHTML())}mouseDownHandler(t){this.mouseDown=!0}setUpMouseDownHandler(){this.element.addEventListener("mousedown",this.mouseDownHandler.bind(this))}constructor(t,e){this.parent=t,this.element=e.element,this.loadingHTML=e.loadingHTML,this.multiple=e.multiple,this.getSelectionId=e.getSelectionId,this.mouseDown=!1,this.setUpMouseDownHandler(),this.suggestionElements=null,this.navIndex=-1,this.onSelect=e.onSelect,this.setUpClickHandler()}},h=class{static defaultSuggestionHTML(t,e){return e||t}prependGroupIfNeeded(t,e){var s="",i=t(e);return this.prevGroupName!==i&&(s=`<li class="ac_group">${i}</li>`,this.prevGroupName=i),s}getSuggestionsHTML(t,e){var s="<ul>",i=0,n=this,a=this.parent.ordering.group,o=this.parent.suggestionsBox,r=o.multiple,h=!1;return t.forEach((function(t){a&&(s+=n.prependGroupIfNeeded(a,t));var l="";if(r){var u=o.getSelectionId(t);if(n.parent.store.existsSelection(u)&&(l=" selected",!n.showSelected))return void i++}s+=`<li data-index="${i}" class="${"ac_suggestion"+l}">`+n.suggestionHTML(t,e[i])+"</li>",h=!0,i++})),s+="</ul>",h&&s}activate(){var t=this.parent.store.matches,e=this.parent.store.highlightedMatches,s=this.getSuggestionsHTML(t,e);s?this.parent.suggestionsBox.show(s):this.parent.suggestionsBox.noMatch()}constructor(t,e){this.parent=t,this.suggestionHTML=e.suggestionHTML,this.prevGroupName=null,this.showSelected=e.showSelected}},l=class{static defaultGroup(t){return t.charAt(0)}static ascSorting(t,e){return t<e?-1:t>e?1:0}static descSorting(t,e){return t<e?1:t>e?-1:0}getGroupNamesMap(){var t=this.parent.store.matches,e={},s=this;return t.forEach((function(t){var i=s.group(t);e[i]||(e[i]=[]),e[i].push(t)})),e}doOrder(){return!!(this.group||this.sort||this.sortGroup)}activate(){if(this.doOrder()&&this.group){var t=this.getGroupNamesMap(),e=Object.keys(t);if(this.sortGroup&&e.sort(this.sortGroup),this.sort)for(var s in t)t[s].sort(this.sort);var i=[];e.forEach((function(e){i=i.concat(t[e])})),this.parent.store.matches=i}this.parent.presentation.activate()}constructor(t,e){this.parent=t,this.group=e.group,this.sort=e.sort,this.sortGroup=e.sortGroup}};s(19);class u{unselect(t){this.store.removeSelection(t)}defaults(){var t={data:null,initData:null,allOnEmpty:!1,inputElement:null};return t.inputValue=n.defaultInputValue,t.debounceDelay=0,t.suggestionsBoxElement=null,t.suggestionHTML=h.defaultSuggestionHTML,t.multiple=!1,t.getSelectionId=r.defaultGetSelectionId,t.showSelected=!0,t.matchTarget=o.defaultMatchTarget,t.loadingHTML=r.defaultLoadingHTML,t.onSelect=null,t.makeSelection=o.defaultMakeSelection,t.isMatch=o.defaultIsMatch,t.arrowNav=!0,t.removeOnBlur=!0,t.hideOnBlur=!0,t.showOnFocus=!1,t.group=null,t.sort=null,t.sortGroup=null,t.highlight=!1,t.highlightTarget=o.defaultHighlightTarget,t}constructor(t){var e=this.defaults();for(var s in t)e[s]=t[s];if(e.highlight&&t.makeSelection)throw new Error("Options `highlight` and `makeSelection` can't be set together.");this.input=new n(this,{element:e.inputElement,arrowNav:e.arrowNav,hideOnBlur:e.hideOnBlur,inputValue:e.inputValue,showOnFocus:e.showOnFocus,debounceDelay:e.debounceDelay}),this.suggestionsBox=new r(this,{element:e.suggestionsBoxElement,onSelect:e.onSelect,loadingHTML:e.loadingHTML,multiple:e.multiple,getSelectionId:e.getSelectionId}),this.selection=new o(this,{makeSelection:e.makeSelection,matchTarget:e.matchTarget,isMatch:e.isMatch,allOnEmpty:e.allOnEmpty,highlight:e.highlight,highlightTarget:e.highlightTarget}),this.store=new class{update(t){this.matches=t}doneLoadingData(t){this.isLoading=!1,this.data=t,this.parent.selection.doneLoadingData()}loadData(){var t=this.doneLoadingData.bind(this);this.isLoading=!0;var e=this.initData(t);e instanceof Promise&&e.then(t)}reset(){this.highlightedMatches=[]}addHighlightedMatch(t){this.highlightedMatches.push(t)}addSelection(t){this.selectedEntries[t]=!0}existsSelection(t){return t in this.selectedEntries}removeSelection(t){delete this.selectedEntries[t]}constructor(t,e){this.parent=t,this.data=e.data,this.initData=e.initData,this.matches=null,this.highlightedMatches=[],this.selectedEntries={},this.isLoading=!1,this.initData&&this.loadData()}}(this,{data:e.data,initData:e.initData}),this.ordering=new l(this,{group:e.group,sort:e.sort,sortGroup:e.sortGroup}),this.presentation=new h(this,{suggestionHTML:e.suggestionHTML,showSelected:e.showSelected})}}u.ascSorting=l.ascSorting,u.descSorting=l.descSorting,u.groupByFirstLetter=l.defaultGroup,String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};const g=u})(),Autocompleter=i.default})();